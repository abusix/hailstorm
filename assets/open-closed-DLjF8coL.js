import{r as o,R as C}from"./index-0d5eMwbi.js";import{p as E,n as x,a as h}from"./use-sync-refs-Belg-Qp7.js";function y(e){let n={called:!1};return(...t)=>{if(!n.called)return n.called=!0,e(...t)}}function b(e=0){let[n,t]=o.useState(e),l=o.useCallback(r=>t(r),[n]),g=o.useCallback(r=>t(i=>i|r),[n]),u=o.useCallback(r=>(n&r)===r,[n]),d=o.useCallback(r=>t(i=>i&~r),[t]),s=o.useCallback(r=>t(i=>i^r),[t]);return{flags:n,setFlag:l,addFlag:g,hasFlag:u,removeFlag:d,toggleFlag:s}}var k=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(k||{});function N(e){let n={};for(let t in e)e[t]===!0&&(n[`data-${t}`]="");return n}function S(e,n,t,l){let[g,u]=o.useState(t),{hasFlag:d,addFlag:s,removeFlag:r}=b(e&&g?3:0),i=o.useRef(!1),a=o.useRef(!1),c=E();return x(function p(){var f;if(!e)return;t&&u(!0);let v=n.current;return v?((f=l==null?void 0:l.start)==null||f.call(l,t),L(v,{inFlight:i,prepare(){a.current?a.current=!1:a.current=i.current,i.current=!0,!a.current&&(t?(s(3),r(4)):(s(4),r(2)))},run(){a.current?t?(r(3),s(4)):(r(4),s(3)):t?r(1):s(1)},done(){var F;a.current&&typeof v.getAnimations=="function"&&v.getAnimations().length>0||(i.current=!1,r(7),t||u(!1),(F=l==null?void 0:l.end)==null||F.call(l,t))}})):t?(s(3),c.nextFrame(()=>p())):void 0},[e,t,n,c]),e?[g,{closed:d(1),enter:d(2),leave:d(4),transition:d(2)||d(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function L(e,{prepare:n,run:t,done:l,inFlight:g}){let u=h();return R(e,{prepare:n,inFlight:g}),u.nextFrame(()=>{u.add(O(e,l)),t()}),u.dispose}function O(e,n){let t=y(n),l=h();if(!e)return l.dispose;let{transitionDuration:g,transitionDelay:u}=getComputedStyle(e),[d,s]=[g,u].map(i=>{let[a=0]=i.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,p)=>p-c);return a}),r=d+s;if(r!==0){let i=l.group(a=>{let c=a.setTimeout(()=>{t(),a.dispose()},r);a.addEventListener(e,"transitionrun",p=>{p.target===p.currentTarget&&(c(),a.addEventListener(e,"transitioncancel",f=>{f.target===f.currentTarget&&(t(),i())}))})});l.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(t(),l.dispose())})}else t();return l.dispose}function R(e,{inFlight:n,prepare:t}){if(n!=null&&n.current){t();return}let l=e.style.transition;e.style.transition="none",t(),e.offsetHeight,e.style.transition=l}let m=o.createContext(null);m.displayName="OpenClosedContext";var T=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(T||{});function $(){return o.useContext(m)}function P({value:e,children:n}){return C.createElement(m.Provider,{value:e},n)}function B({children:e}){return C.createElement(m.Provider,{value:null},e)}export{N as A,S as V,P as c,T as i,B as s,$ as u};
