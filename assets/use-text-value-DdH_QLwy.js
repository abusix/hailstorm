import{r as i}from"./index-DX35FyXq.js";import{u as D}from"./keyboard-CMPngVPH.js";import{n as g,o as v}from"./use-sync-refs-DTQ85WuU.js";function s(t){return[t.screenX,t.screenY]}function w(){let t=i.useRef([-1,-1]);return{wasMoved(n){let r=s(n);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(n){t.current=s(n)}}}function C(t,{container:n,accept:r,walk:u}){let l=i.useRef(r),e=i.useRef(u);i.useEffect(()=>{l.current=r,e.current=u},[r,u]),g(()=>{if(!n||!t)return;let o=D(n);if(!o)return;let c=l.current,p=e.current,m=Object.assign(F=>c(F),{acceptNode:c}),f=o.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,m,!1);for(;f.nextNode();)p(f.currentNode)},[n,t,l,e])}function b(t){throw new Error("Unexpected object: "+t)}var h=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(h||{});function T(t,n){let r=n.resolveItems();if(r.length<=0)return null;let u=n.resolveActiveIndex(),l=u??-1;switch(t.focus){case 0:{for(let e=0;e<r.length;++e)if(!n.resolveDisabled(r[e],e,r))return e;return u}case 1:{l===-1&&(l=r.length);for(let e=l-1;e>=0;--e)if(!n.resolveDisabled(r[e],e,r))return e;return u}case 2:{for(let e=l+1;e<r.length;++e)if(!n.resolveDisabled(r[e],e,r))return e;return u}case 3:{for(let e=r.length-1;e>=0;--e)if(!n.resolveDisabled(r[e],e,r))return e;return u}case 4:{for(let e=0;e<r.length;++e)if(n.resolveId(r[e],e,r)===t.id)return e;return u}case 5:return null;default:b(t)}}function y(t,n){let r=i.useRef({left:0,top:0});if(g(()=>{let l=n.current;if(!l)return;let e=l.getBoundingClientRect();e&&(r.current=e)},[t]),n.current==null||!t||n.current===document.activeElement)return!1;let u=n.current.getBoundingClientRect();return u.top!==r.current.top||u.left!==r.current.left}let a=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function d(t){var n,r;let u=(n=t.innerText)!=null?n:"",l=t.cloneNode(!0);if(!(l instanceof HTMLElement))return u;let e=!1;for(let c of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),e=!0;let o=e?(r=l.innerText)!=null?r:"":u;return a.test(o)&&(o=o.replace(a,"")),o}function E(t){let n=t.getAttribute("aria-label");if(typeof n=="string")return n.trim();let r=t.getAttribute("aria-labelledby");if(r){let u=r.split(" ").map(l=>{let e=document.getElementById(l);if(e){let o=e.getAttribute("aria-label");return typeof o=="string"?o.trim():d(e).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return d(t).trim()}function A(t){let n=i.useRef(""),r=i.useRef("");return v(()=>{let u=t.current;if(!u)return"";let l=u.innerText;if(n.current===l)return r.current;let e=E(u).trim().toLowerCase();return n.current=l,r.current=e,e})}export{C as F,h as c,T as f,y as p,A as s,w as u};
