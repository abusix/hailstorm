import{a as C,j as G}from"./jsx-runtime-a888423b.js";import{c as F}from"./class-names-2bb0c168.js";import{r as f,R as Q}from"./index-8db94870.js";import{S as U,D as T,y as E,o as I,u as q,X as $,I as O,l as w,a as d,b as N}from"./keyboard-f3ae5531.js";import{p as j,r as H}from"./bugs-6ad166a8.js";import{F as J,u as W,a as y,x as X}from"./use-tracked-pointer-b0b2487f.js";import{h as z,T as Y,_ as Z,M as K,D as B,I as ee}from"./focus-management-8ba95dc1.js";import{L as te,c as re,d as D,C as ae}from"./open-closed-818d3463.js";import{s as ne}from"./use-resolve-button-type-3a664423.js";import{n as oe}from"./use-owner-3a57d220.js";var ie=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ie||{}),ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ue||{}),le=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(le||{});function A(e,i=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=ee(i(e.items.slice()),l=>l.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return o===-1&&(o=null),{items:r,activeItemIndex:o}}let se={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,i)=>{var n;let r=A(e),o=X(i,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:o,activationTrigger:(n=i.trigger)!=null?n:1}},[3]:(e,i)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+i.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(u=>{var t;return((t=u.dataRef.current.textValue)==null?void 0:t.startsWith(r))&&!u.dataRef.current.disabled}),l=o?e.items.indexOf(o):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:l,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,i)=>{let n=A(e,r=>[...r,{id:i.id,dataRef:i.dataRef}]);return{...e,...n}},[6]:(e,i)=>{let n=A(e,r=>{let o=r.findIndex(l=>l.id===i.id);return o!==-1&&r.splice(o,1),r});return{...e,...n,activationTrigger:1}}},_=f.createContext(null);_.displayName="MenuContext";function k(e){let i=f.useContext(_);if(i===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,k),n}return i}function ce(e,i){return q(i.type,se,e,i)}let me=f.Fragment;function de(e,i){let n=f.useReducer(ce,{menuState:1,buttonRef:f.createRef(),itemsRef:f.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:o,buttonRef:l},u]=n,t=E(i);te([l,o],(x,h)=>{var R;u({type:1}),z(h,Y.Loose)||(x.preventDefault(),(R=l.current)==null||R.focus())},r===0);let s=I(()=>{u({type:1})}),p=f.useMemo(()=>({open:r===0,close:s}),[r,s]),g=e,v={ref:t};return Q.createElement(_.Provider,{value:n},Q.createElement(re,{value:q(r,{[0]:D.Open,[1]:D.Closed})},$({ourProps:v,theirProps:g,slot:p,defaultTag:me,name:"Menu"})))}let pe="button";function fe(e,i){var n;let r=O(),{id:o=`headlessui-menu-button-${r}`,...l}=e,[u,t]=k("Menu.Button"),s=E(u.buttonRef,i),p=j(),g=I(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.First}));break;case d.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.Last}));break}}),v=I(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),x=I(c=>{if(H(c.currentTarget))return c.preventDefault();e.disabled||(u.menuState===0?(t({type:1}),p.nextFrame(()=>{var S;return(S=u.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),h=f.useMemo(()=>({open:u.menuState===0}),[u]),R={ref:s,id:o,type:ne(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(n=u.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:u.menuState===0,onKeyDown:g,onKeyUp:v,onClick:x};return $({ourProps:R,theirProps:l,slot:h,defaultTag:pe,name:"Menu.Button"})}let ve="div",Ie=U.RenderStrategy|U.Static;function be(e,i){var n,r;let o=O(),{id:l=`headlessui-menu-items-${o}`,...u}=e,[t,s]=k("Menu.Items"),p=E(t.itemsRef,i),g=oe(t.itemsRef),v=j(),x=ae(),h=(()=>x!==null?(x&D.Open)===D.Open:t.menuState===0)();f.useEffect(()=>{let a=t.itemsRef.current;a&&t.menuState===0&&a!==(g==null?void 0:g.activeElement)&&a.focus({preventScroll:!0})},[t.menuState,t.itemsRef,g]),J({container:t.itemsRef.current,enabled:t.menuState===0,accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let R=I(a=>{var P,m;switch(v.dispose(),a.key){case d.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),s({type:3,value:a.key});case d.Enter:if(a.preventDefault(),a.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:b}=t.items[t.activeItemIndex];(m=(P=b.current)==null?void 0:P.domRef.current)==null||m.click()}B(t.buttonRef.current);break;case d.ArrowDown:return a.preventDefault(),a.stopPropagation(),s({type:2,focus:y.Next});case d.ArrowUp:return a.preventDefault(),a.stopPropagation(),s({type:2,focus:y.Previous});case d.Home:case d.PageUp:return a.preventDefault(),a.stopPropagation(),s({type:2,focus:y.First});case d.End:case d.PageDown:return a.preventDefault(),a.stopPropagation(),s({type:2,focus:y.Last});case d.Escape:a.preventDefault(),a.stopPropagation(),s({type:1}),N().nextFrame(()=>{var b;return(b=t.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})});break;case d.Tab:a.preventDefault(),a.stopPropagation(),s({type:1}),N().nextFrame(()=>{Z(t.buttonRef.current,a.shiftKey?K.Previous:K.Next)});break;default:a.key.length===1&&(s({type:3,value:a.key}),v.setTimeout(()=>s({type:4}),350));break}}),c=I(a=>{switch(a.key){case d.Space:a.preventDefault();break}}),S=f.useMemo(()=>({open:t.menuState===0}),[t]),M={"aria-activedescendant":t.activeItemIndex===null||(n=t.items[t.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=t.buttonRef.current)==null?void 0:r.id,id:l,onKeyDown:R,onKeyUp:c,role:"menu",tabIndex:0,ref:p};return $({ourProps:M,theirProps:u,slot:S,defaultTag:ve,features:Ie,visible:h,name:"Menu.Items"})}let ye=f.Fragment;function ge(e,i){let n=O(),{id:r=`headlessui-menu-item-${n}`,disabled:o=!1,...l}=e,[u,t]=k("Menu.Item"),s=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===r:!1,p=f.useRef(null),g=E(i,p);w(()=>{if(u.menuState!==0||!s||u.activationTrigger===0)return;let m=N();return m.requestAnimationFrame(()=>{var b,L;(L=(b=p.current)==null?void 0:b.scrollIntoView)==null||L.call(b,{block:"nearest"})}),m.dispose},[p,s,u.menuState,u.activationTrigger,u.activeItemIndex]);let v=f.useRef({disabled:o,domRef:p});w(()=>{v.current.disabled=o},[v,o]),w(()=>{var m,b;v.current.textValue=(b=(m=p.current)==null?void 0:m.textContent)==null?void 0:b.toLowerCase()},[v,p]),w(()=>(t({type:5,id:r,dataRef:v}),()=>t({type:6,id:r})),[v,r]);let x=I(()=>{t({type:1})}),h=I(m=>{if(o)return m.preventDefault();t({type:1}),B(u.buttonRef.current)}),R=I(()=>{if(o)return t({type:2,focus:y.Nothing});t({type:2,focus:y.Specific,id:r})}),c=W(),S=I(m=>c.update(m)),M=I(m=>{c.wasMoved(m)&&(o||s||t({type:2,focus:y.Specific,id:r,trigger:0}))}),a=I(m=>{c.wasMoved(m)&&(o||s&&t({type:2,focus:y.Nothing}))}),P=f.useMemo(()=>({active:s,disabled:o,close:x}),[s,o,x]);return $({ourProps:{id:r,ref:g,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:R,onPointerEnter:S,onMouseEnter:S,onPointerMove:M,onMouseMove:M,onPointerLeave:a,onMouseLeave:a},theirProps:l,slot:P,defaultTag:ye,name:"Menu.Item"})}let xe=T(de),Re=T(fe),he=T(be),Se=T(ge),Me=Object.assign(xe,{Button:Re,Items:he,Item:Se});const V=({children:e,LeftIcon:i,isSelected:n=!1,disabled:r=!1,onClick:o})=>C(Me.Item,{disabled:r,children:({active:l})=>G("button",{type:"button",className:F("group relative flex w-full cursor-pointer items-center gap-4 bg-neutral-0 px-4 py-2.5 hover:bg-neutral-100 focus:ring-2 focus:ring-primary-200 active:bg-neutral-200 disabled:bg-neutral-0",l&&"bg-neutral-100",n&&"bg-primary-100 hover:bg-primary-100 active:bg-primary-100"),disabled:r,onKeyDown:o,onClick:o,children:[i?C(i,{className:F("h-4 w-4 fill-neutral-600 group-disabled:fill-neutral-400",n&&"fill-primary-400")}):null,C("div",{className:F("paragraph-200 text-neutral-800 group-disabled:text-neutral-400",n&&"text-primary-400 before:absolute before:bottom-0 before:left-0 before:top-0 before:w-0.5 before:rounded-r-sm before:bg-primary-400 group-disabled:before:bg-neutral-0"),children:e})]})});try{V.displayName="MenuItem",V.__docgenInfo={description:"",displayName:"MenuItem",props:{LeftIcon:{defaultValue:null,description:"",name:"LeftIcon",required:!1,type:{name:"ElementType<any>"}},isSelected:{defaultValue:{value:"false"},description:"",name:"isSelected",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{V as M,Me as o};
//# sourceMappingURL=menu-item-96e557c7.js.map
