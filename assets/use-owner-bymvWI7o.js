import{r as i,R as E}from"./index-4g5l5LRQ.js";import{h as w,T as C,e as g}from"./focus-management-CoYP-xeJ.js";import{c as v}from"./keyboard-UncMrW7s.js";function f(t,a,r){let l=v(a);i.useEffect(()=>{function u(c){l.current(c)}return document.addEventListener(t,u,r),()=>document.removeEventListener(t,u,r)},[t,r])}function h(t,a,r){let l=v(a);i.useEffect(()=>{function u(c){l.current(c)}return window.addEventListener(t,u,r),()=>window.removeEventListener(t,u,r)},[t,r])}function R(t,a,r=!0){let l=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{l.current=r})},[r]);function u(e,s){if(!l.current||e.defaultPrevented)return;let n=s(e);if(n===null||!n.getRootNode().contains(n)||!n.isConnected)return;let p=function d(o){return typeof o=="function"?d(o()):Array.isArray(o)||o instanceof Set?o:[o]}(t);for(let d of p){if(d===null)continue;let o=d instanceof HTMLElement?d:d.current;if(o!=null&&o.contains(n)||e.composed&&e.composedPath().includes(o))return}return!w(n,C.Loose)&&n.tabIndex!==-1&&e.preventDefault(),a(e,n)}let c=i.useRef(null);f("pointerdown",e=>{var s,n;l.current&&(c.current=((n=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:n[0])||e.target)},!0),f("mousedown",e=>{var s,n;l.current&&(c.current=((n=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:n[0])||e.target)},!0),f("click",e=>{c.current&&(u(e,()=>c.current),c.current=null)},!0),f("touchend",e=>u(e,()=>e.target instanceof HTMLElement?e.target:null),!0),h("blur",e=>u(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let m=i.createContext(null);m.displayName="OpenClosedContext";var L=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(L||{});function y(){return i.useContext(m)}function M({value:t,children:a}){return E.createElement(m.Provider,{value:t},a)}function T(...t){return i.useMemo(()=>g(...t),[...t])}export{y as C,M as c,L as d,R as h,T as n,h as s};
