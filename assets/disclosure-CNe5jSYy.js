import{$ as z,a as G,w as J,T as Q}from"./use-resolve-button-type-DPkGNm3y.js";import{R as I,r as t}from"./index-DX35FyXq.js";import{M as U,W as T,y as C,T as X,o as g,u as R,H as x,I as K,D as V}from"./use-sync-refs-DTQ85WuU.js";import{c as Y,i as k,u as Z,V as _,A as ee,s as te}from"./open-closed-CW48b85x.js";import{u as re}from"./close-provider-Cb2w3_dY.js";import{r as ne}from"./bugs-DpEN4NTH.js";import{u as le,o as E}from"./keyboard-CMPngVPH.js";var A;let oe=(A=I.startTransition)!=null?A:function(e){e()};var se=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(se||{}),ae=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(ae||{});let ue={0:e=>({...e,disclosureState:R(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,r){return e.buttonId===r.buttonId?e:{...e,buttonId:r.buttonId}},3(e,r){return e.panelId===r.panelId?e:{...e,panelId:r.panelId}}},h=t.createContext(null);h.displayName="DisclosureContext";function w(e){let r=t.useContext(h);if(r===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,w),u}return r}let M=t.createContext(null);M.displayName="DisclosureAPIContext";function W(e){let r=t.useContext(M);if(r===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,W),u}return r}let F=t.createContext(null);F.displayName="DisclosurePanelContext";function ie(){return t.useContext(F)}function ce(e,r){return R(r.type,ue,e,r)}let de=t.Fragment;function pe(e,r){let{defaultOpen:u=!1,...p}=e,o=t.useRef(null),f=C(r,X(a=>{o.current=a},e.as===void 0||e.as===t.Fragment)),c=t.useRef(null),n=t.useRef(null),l=t.useReducer(ce,{disclosureState:u?0:1,linkedPanel:!1,buttonRef:n,panelRef:c,buttonId:null,panelId:null}),[{disclosureState:m,buttonId:s},P]=l,d=g(a=>{P({type:1});let b=le(o);if(!b||!s)return;let D=a?a instanceof HTMLElement?a:a.current instanceof HTMLElement?a.current:b.getElementById(s):b.getElementById(s);D==null||D.focus()}),y=t.useMemo(()=>({close:d}),[d]),$=t.useMemo(()=>({open:m===0,close:d}),[m,d]),S={ref:f};return I.createElement(h.Provider,{value:l},I.createElement(M.Provider,{value:y},I.createElement(re,{value:d},I.createElement(Y,{value:R(m,{0:k.Open,1:k.Closed})},x({ourProps:S,theirProps:p,slot:$,defaultTag:de,name:"Disclosure"})))))}let fe="button";function me(e,r){let u=t.useId(),{id:p=`headlessui-disclosure-button-${u}`,disabled:o=!1,autoFocus:f=!1,...c}=e,[n,l]=w("Disclosure.Button"),m=ie(),s=m===null?!1:m===n.panelId,P=t.useRef(null),d=C(P,r,s?null:n.buttonRef),y=K();t.useEffect(()=>{if(!s)return l({type:2,buttonId:p}),()=>{l({type:2,buttonId:null})}},[p,l,s]);let $=g(i=>{var v;if(s){if(n.disclosureState===1)return;switch(i.key){case E.Space:case E.Enter:i.preventDefault(),i.stopPropagation(),l({type:0}),(v=n.buttonRef.current)==null||v.focus();break}}else switch(i.key){case E.Space:case E.Enter:i.preventDefault(),i.stopPropagation(),l({type:0});break}}),S=g(i=>{switch(i.key){case E.Space:i.preventDefault();break}}),a=g(i=>{var v;ne(i.currentTarget)||o||(s?(l({type:0}),(v=n.buttonRef.current)==null||v.focus()):l({type:0}))}),{isFocusVisible:b,focusProps:D}=z({autoFocus:f}),{isHovered:B,hoverProps:O}=G({isDisabled:o}),{pressed:H,pressProps:L}=J({disabled:o}),j=t.useMemo(()=>({open:n.disclosureState===0,hover:B,active:H,disabled:o,focus:b,autofocus:f}),[n,B,H,b,o,f]),N=Q(e,P),q=s?V({ref:d,type:N,disabled:o||void 0,autoFocus:f,onKeyDown:$,onClick:a},D,O,L):V({ref:d,id:p,type:N,"aria-expanded":n.disclosureState===0,"aria-controls":n.linkedPanel?n.panelId:void 0,disabled:o||void 0,autoFocus:f,onKeyDown:$,onKeyUp:S,onClick:a},D,O,L);return x({mergeRefs:y,ourProps:q,theirProps:c,slot:j,defaultTag:fe,name:"Disclosure.Button"})}let Pe="div",Ie=U.RenderStrategy|U.Static;function $e(e,r){let u=t.useId(),{id:p=`headlessui-disclosure-panel-${u}`,transition:o=!1,...f}=e,[c,n]=w("Disclosure.Panel"),{close:l}=W("Disclosure.Panel"),m=K(),s=C(r,c.panelRef,a=>{oe(()=>n({type:a?4:5}))});t.useEffect(()=>(n({type:3,panelId:p}),()=>{n({type:3,panelId:null})}),[p,n]);let P=Z(),[d,y]=_(o,c.panelRef,P!==null?(P&k.Open)===k.Open:c.disclosureState===0),$=t.useMemo(()=>({open:c.disclosureState===0,close:l}),[c.disclosureState,l]),S={ref:s,id:p,...ee(y)};return I.createElement(te,null,I.createElement(F.Provider,{value:c.panelId},x({mergeRefs:m,ourProps:S,theirProps:f,slot:$,defaultTag:Pe,features:Ie,visible:d,name:"Disclosure.Panel"})))}let be=T(pe),ye=T(me),Se=T($e),Re=Object.assign(be,{Button:ye,Panel:Se});export{ye as C,Se as I,Re as W};
