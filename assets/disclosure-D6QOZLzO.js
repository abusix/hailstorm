import{$ as V,a as J,w as X,e as q}from"./use-resolve-button-type-HzzQKYtS.js";import{R as S,r as l}from"./index-0d5eMwbi.js";import{O as N,K as T,y as x,T as z,o as I,L as h,u as k,_ as j}from"./use-sync-refs-DhZgiOVe.js";import{c as G,i as C,u as Q,x as W,R as Y,s as Z}from"./open-closed-FM4Rfwkx.js";import{C as ee}from"./close-provider-CZp7Lqob.js";import{r as te}from"./bugs-DpEN4NTH.js";import{u as le,o as $}from"./keyboard-D0BTZntQ.js";var L;let re=(L=S.startTransition)!=null?L:function(e){e()};var ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ne||{}),oe=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(oe||{});let se={0:e=>({...e,disclosureState:k(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},w=l.createContext(null);w.displayName="DisclosureContext";function B(e){let t=l.useContext(w);if(t===null){let i=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,B),i}return t}let R=l.createContext(null);R.displayName="DisclosureAPIContext";function _(e){let t=l.useContext(R);if(t===null){let i=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,_),i}return t}let F=l.createContext(null);F.displayName="DisclosurePanelContext";function ae(){return l.useContext(F)}function ue(e,t){return k(t.type,se,e,t)}let ie=l.Fragment;function ce(e,t){let{defaultOpen:i=!1,...c}=e,a=l.useRef(null),d=x(t,z(u=>{a.current=u},e.as===void 0||e.as===l.Fragment)),p=l.useReducer(ue,{disclosureState:i?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:r,buttonId:n},b]=p,o=I(u=>{b({type:1});let m=le(a);if(!m||!n)return;let E=u?u instanceof HTMLElement?u:u.current instanceof HTMLElement?u.current:m.getElementById(n):m.getElementById(n);E==null||E.focus()}),v=l.useMemo(()=>({close:o}),[o]),f=l.useMemo(()=>({open:r===0,close:o}),[r,o]),y={ref:d},D=h();return S.createElement(w.Provider,{value:p},S.createElement(R.Provider,{value:v},S.createElement(ee,{value:o},S.createElement(G,{value:k(r,{0:C.Open,1:C.Closed})},D({ourProps:y,theirProps:c,slot:f,defaultTag:ie,name:"Disclosure"})))))}let de="button";function pe(e,t){let i=l.useId(),{id:c=`headlessui-disclosure-button-${i}`,disabled:a=!1,autoFocus:d=!1,...p}=e,[r,n]=B("Disclosure.Button"),b=ae(),o=b===null?!1:b===r.panelId,v=l.useRef(null),f=x(v,t,I(s=>{if(!o)return n({type:4,element:s})}));l.useEffect(()=>{if(!o)return n({type:2,buttonId:c}),()=>{n({type:2,buttonId:null})}},[c,n,o]);let y=I(s=>{var P;if(o){if(r.disclosureState===1)return;switch(s.key){case $.Space:case $.Enter:s.preventDefault(),s.stopPropagation(),n({type:0}),(P=r.buttonElement)==null||P.focus();break}}else switch(s.key){case $.Space:case $.Enter:s.preventDefault(),s.stopPropagation(),n({type:0});break}}),D=I(s=>{switch(s.key){case $.Space:s.preventDefault();break}}),u=I(s=>{var P;te(s.currentTarget)||a||(o?(n({type:0}),(P=r.buttonElement)==null||P.focus()):n({type:0}))}),{isFocusVisible:m,focusProps:E}=V({autoFocus:d}),{isHovered:g,hoverProps:O}=J({isDisabled:a}),{pressed:M,pressProps:H}=X({disabled:a}),A=l.useMemo(()=>({open:r.disclosureState===0,hover:g,active:M,disabled:a,focus:m,autofocus:d}),[r,g,M,m,a,d]),K=q(e,r.buttonElement),U=o?j({ref:f,type:K,disabled:a||void 0,autoFocus:d,onKeyDown:y,onClick:u},E,O,H):j({ref:f,id:c,type:K,"aria-expanded":r.disclosureState===0,"aria-controls":r.panelElement?r.panelId:void 0,disabled:a||void 0,autoFocus:d,onKeyDown:y,onKeyUp:D,onClick:u},E,O,H);return h()({ourProps:U,theirProps:p,slot:A,defaultTag:de,name:"Disclosure.Button"})}let me="div",fe=N.RenderStrategy|N.Static;function Ee(e,t){let i=l.useId(),{id:c=`headlessui-disclosure-panel-${i}`,transition:a=!1,...d}=e,[p,r]=B("Disclosure.Panel"),{close:n}=_("Disclosure.Panel"),[b,o]=l.useState(null),v=x(t,I(g=>{re(()=>r({type:5,element:g}))}),o);l.useEffect(()=>(r({type:3,panelId:c}),()=>{r({type:3,panelId:null})}),[c,r]);let f=Q(),[y,D]=W(a,b,f!==null?(f&C.Open)===C.Open:p.disclosureState===0),u=l.useMemo(()=>({open:p.disclosureState===0,close:n}),[p.disclosureState,n]),m={ref:v,id:c,...Y(D)},E=h();return S.createElement(Z,null,S.createElement(F.Provider,{value:p.panelId},E({ourProps:m,theirProps:d,slot:u,defaultTag:me,features:fe,visible:y,name:"Disclosure.Panel"})))}let Se=T(ce),be=T(pe),ye=T(Ee),Te=Object.assign(Se,{Button:be,Panel:ye});export{be as C,ye as R,Te as j};
