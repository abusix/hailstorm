import{a as _,j as W}from"./jsx-runtime-a888423b.js";import{M as X}from"./menu-info-item-cb36c8ba.js";import{c as F}from"./class-names-2bb0c168.js";import{r as f,R as q}from"./index-8db94870.js";import{S as j,D as E,y as N,o as I,u as z,X as $,I as U,l as T,a as d,b as O}from"./keyboard-f3ae5531.js";import{p as H,r as Y}from"./bugs-6ad166a8.js";import{F as Z,u as ee,a as g,x as te}from"./use-tracked-pointer-b0b2487f.js";import{h as re,T as ae,_ as ne,M as G,D as J,I as oe}from"./focus-management-8ba95dc1.js";import{L as ie,c as ue,d as D,C as se}from"./open-closed-818d3463.js";import{s as le}from"./use-resolve-button-type-3a664423.js";import{n as ce}from"./use-owner-3a57d220.js";import{M as me}from"./menu-separator-cd16a535.js";import{M as de}from"./menu-title-c9b1e564.js";var pe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pe||{}),fe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(fe||{}),ve=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ve||{});function A(e,i=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=oe(i(e.items.slice()),s=>s.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return o===-1&&(o=null),{items:r,activeItemIndex:o}}let Ie={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,i)=>{var n;let r=A(e),o=te(i,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:o,activationTrigger:(n=i.trigger)!=null?n:1}},[3]:(e,i)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+i.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(u=>{var t;return((t=u.dataRef.current.textValue)==null?void 0:t.startsWith(r))&&!u.dataRef.current.disabled}),s=o?e.items.indexOf(o):-1;return s===-1||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,i)=>{let n=A(e,r=>[...r,{id:i.id,dataRef:i.dataRef}]);return{...e,...n}},[6]:(e,i)=>{let n=A(e,r=>{let o=r.findIndex(s=>s.id===i.id);return o!==-1&&r.splice(o,1),r});return{...e,...n,activationTrigger:1}}},V=f.createContext(null);V.displayName="MenuContext";function k(e){let i=f.useContext(V);if(i===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,k),n}return i}function ye(e,i){return z(i.type,Ie,e,i)}let ge=f.Fragment;function be(e,i){let n=f.useReducer(ye,{menuState:1,buttonRef:f.createRef(),itemsRef:f.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:o,buttonRef:s},u]=n,t=N(i);ie([s,o],(x,R)=>{var M;u({type:1}),re(R,ae.Loose)||(x.preventDefault(),(M=s.current)==null||M.focus())},r===0);let l=I(()=>{u({type:1})}),p=f.useMemo(()=>({open:r===0,close:l}),[r,l]),b=e,v={ref:t};return q.createElement(V.Provider,{value:n},q.createElement(ue,{value:z(r,{[0]:D.Open,[1]:D.Closed})},$({ourProps:v,theirProps:b,slot:p,defaultTag:ge,name:"Menu"})))}let xe="button";function Me(e,i){var n;let r=U(),{id:o=`headlessui-menu-button-${r}`,...s}=e,[u,t]=k("Menu.Button"),l=N(u.buttonRef,i),p=H(),b=I(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:g.First}));break;case d.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:g.Last}));break}}),v=I(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),x=I(c=>{if(Y(c.currentTarget))return c.preventDefault();e.disabled||(u.menuState===0?(t({type:1}),p.nextFrame(()=>{var S;return(S=u.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),R=f.useMemo(()=>({open:u.menuState===0}),[u]),M={ref:l,id:o,type:le(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(n=u.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:u.menuState===0,onKeyDown:b,onKeyUp:v,onClick:x};return $({ourProps:M,theirProps:s,slot:R,defaultTag:xe,name:"Menu.Button"})}let he="div",Re=j.RenderStrategy|j.Static;function Se(e,i){var n,r;let o=U(),{id:s=`headlessui-menu-items-${o}`,...u}=e,[t,l]=k("Menu.Items"),p=N(t.itemsRef,i),b=ce(t.itemsRef),v=H(),x=se(),R=(()=>x!==null?(x&D.Open)===D.Open:t.menuState===0)();f.useEffect(()=>{let a=t.itemsRef.current;a&&t.menuState===0&&a!==(b==null?void 0:b.activeElement)&&a.focus({preventScroll:!0})},[t.menuState,t.itemsRef,b]),Z({container:t.itemsRef.current,enabled:t.menuState===0,accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let M=I(a=>{var w,m;switch(v.dispose(),a.key){case d.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),l({type:3,value:a.key});case d.Enter:if(a.preventDefault(),a.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:y}=t.items[t.activeItemIndex];(m=(w=y.current)==null?void 0:w.domRef.current)==null||m.click()}J(t.buttonRef.current);break;case d.ArrowDown:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:g.Next});case d.ArrowUp:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:g.Previous});case d.Home:case d.PageUp:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:g.First});case d.End:case d.PageDown:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:g.Last});case d.Escape:a.preventDefault(),a.stopPropagation(),l({type:1}),O().nextFrame(()=>{var y;return(y=t.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})});break;case d.Tab:a.preventDefault(),a.stopPropagation(),l({type:1}),O().nextFrame(()=>{ne(t.buttonRef.current,a.shiftKey?G.Previous:G.Next)});break;default:a.key.length===1&&(l({type:3,value:a.key}),v.setTimeout(()=>l({type:4}),350));break}}),c=I(a=>{switch(a.key){case d.Space:a.preventDefault();break}}),S=f.useMemo(()=>({open:t.menuState===0}),[t]),P={"aria-activedescendant":t.activeItemIndex===null||(n=t.items[t.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=t.buttonRef.current)==null?void 0:r.id,id:s,onKeyDown:M,onKeyUp:c,role:"menu",tabIndex:0,ref:p};return $({ourProps:P,theirProps:u,slot:S,defaultTag:he,features:Re,visible:R,name:"Menu.Items"})}let _e=f.Fragment;function Pe(e,i){let n=U(),{id:r=`headlessui-menu-item-${n}`,disabled:o=!1,...s}=e,[u,t]=k("Menu.Item"),l=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===r:!1,p=f.useRef(null),b=N(i,p);T(()=>{if(u.menuState!==0||!l||u.activationTrigger===0)return;let m=O();return m.requestAnimationFrame(()=>{var y,K;(K=(y=p.current)==null?void 0:y.scrollIntoView)==null||K.call(y,{block:"nearest"})}),m.dispose},[p,l,u.menuState,u.activationTrigger,u.activeItemIndex]);let v=f.useRef({disabled:o,domRef:p});T(()=>{v.current.disabled=o},[v,o]),T(()=>{var m,y;v.current.textValue=(y=(m=p.current)==null?void 0:m.textContent)==null?void 0:y.toLowerCase()},[v,p]),T(()=>(t({type:5,id:r,dataRef:v}),()=>t({type:6,id:r})),[v,r]);let x=I(()=>{t({type:1})}),R=I(m=>{if(o)return m.preventDefault();t({type:1}),J(u.buttonRef.current)}),M=I(()=>{if(o)return t({type:2,focus:g.Nothing});t({type:2,focus:g.Specific,id:r})}),c=ee(),S=I(m=>c.update(m)),P=I(m=>{c.wasMoved(m)&&(o||l||t({type:2,focus:g.Specific,id:r,trigger:0}))}),a=I(m=>{c.wasMoved(m)&&(o||l&&t({type:2,focus:g.Nothing}))}),w=f.useMemo(()=>({active:l,disabled:o,close:x}),[l,o,x]);return $({ourProps:{id:r,ref:b,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:R,onFocus:M,onPointerEnter:S,onMouseEnter:S,onPointerMove:P,onMouseMove:P,onPointerLeave:a,onMouseLeave:a},theirProps:s,slot:w,defaultTag:_e,name:"Menu.Item"})}let we=E(be),Te=E(Me),De=E(Se),Ee=E(Pe),C=Object.assign(we,{Button:Te,Items:De,Item:Ee});const L=({children:e,LeftIcon:i,isSelected:n=!1,disabled:r=!1,onClick:o})=>_(C.Item,{disabled:r,children:({active:s})=>W("button",{type:"button",className:F("group relative flex w-full cursor-pointer items-center gap-4 bg-neutral-0 px-4 py-2.5 hover:bg-neutral-100 focus:ring-2 focus:ring-primary-200 active:bg-neutral-200 disabled:bg-neutral-0",s&&"bg-neutral-100",n&&"bg-primary-100 hover:bg-primary-100 active:bg-primary-100"),disabled:r,onKeyDown:o,onClick:o,children:[i?_(i,{className:F("h-4 w-4 fill-neutral-600 group-disabled:fill-neutral-400",n&&"fill-primary-400")}):null,_("div",{className:F("paragraph-200 text-neutral-800 group-disabled:text-neutral-400",n&&"text-primary-400 before:absolute before:bottom-0 before:left-0 before:top-0 before:w-0.5 before:rounded-r-sm before:bg-primary-400 group-disabled:before:bg-neutral-0"),children:e})]})});try{L.displayName="MenuItem",L.__docgenInfo={description:"",displayName:"MenuItem",props:{LeftIcon:{defaultValue:null,description:"",name:"LeftIcon",required:!1,type:{name:"ElementType<any>"}},isSelected:{defaultValue:{value:"false"},description:"",name:"isSelected",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const Q=({children:e})=>_(C.Items,{className:"absolute right-0 z-10 mt-2 flex w-52 flex-col rounded-md bg-neutral-0 py-2 shadow-md outline-none",children:e});try{Q.displayName="MenuItems",Q.__docgenInfo={description:"",displayName:"MenuItems",props:{}}}catch{}const B=({children:e,className:i})=>_(C.Button,{className:i,children:e});try{B.displayName="MenuButton",B.__docgenInfo={description:"",displayName:"MenuButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const h=({children:e})=>_(C,{as:"div",className:"relative",children:e});h.Button=B;h.Items=Q;h.Title=de;h.Item=L;h.InfoItem=X;h.Separator=me;try{h.displayName="Menu",h.__docgenInfo={description:"",displayName:"Menu",props:{}}}catch{}export{L as M,h as a};
//# sourceMappingURL=menu-2ff7e251.js.map
