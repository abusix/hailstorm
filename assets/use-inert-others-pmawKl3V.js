import{n as b,a as g}from"./use-sync-refs-DqQDZvJ6.js";import{u as w}from"./keyboard-C2Ifhsxt.js";import{x as A}from"./portal-wGpXArpj.js";let d=new Map,o=new Map;function p(e){var t;let n=(t=o.get(e))!=null?t:0;return o.set(e,n+1),n!==0?()=>c(e):(d.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>c(e))}function c(e){var t;let n=(t=o.get(e))!=null?t:1;if(n===1?o.delete(e):o.set(e,n-1),n!==1)return;let r=d.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,d.delete(e))}function M(e,{allowed:t,disallowed:n}={}){let r=A(e,"inert-others");b(()=>{var u,f;if(!r)return;let a=g();for(let i of(u=n==null?void 0:n())!=null?u:[])i&&a.add(p(i));let s=(f=t==null?void 0:t())!=null?f:[];for(let i of s){if(!i)continue;let m=w(i);if(!m)continue;let l=i.parentElement;for(;l&&l!==m.body;){for(let h of l.children)s.some(v=>h.contains(v))||a.add(p(h));l=l.parentElement}}return a.dispose},[r,t,n])}export{M as y};
